{% extends "radar/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'radar/styles/subscriptions.css' %}" />
{% endblock %} 

{% block content %}
<div class="subscriptions__catalog container">
{% if subs %}
    <h2 class="catalog__title">Подписки</h2>
    <ul class="catalog__list">
    {% for t in subs %}
        <li class="catalog__item">
        {% if t.action == "add" %}
            <form method="post" action="{% url 'subscriptions_add' %}" class="item__action-form">
                {% csrf_token %}
                <input type="hidden" name="source" value="{{ t.title.source }}">
                <input type="hidden" name="external_id" value="{{ t.title.external_id }}">
                <button type="submit">
                    <img src="{% static 'radar/icons/add.svg' %}" alt="add" class="item__icon--add item__icon-action">
                </button>
            </form>

        
        {% elif t.action == "delete" %}
            <form method="post" action="{% url 'subscriptions_delete' %}" class="item__action-form">
            {% csrf_token %}
            <input type="hidden" name="source" value="{{ t.title.source }}">
            <input type="hidden" name="external_id" value="{{ t.title.external_id }}">
            <button type="submit">
                <img src="{% static 'radar/icons/delete.svg' %}" alt="delete" class="item__icon--delete item__icon-action">
            </button>
            </form>
        {% endif %}
        <a href="" class="item__link">
            {% if t.title.cover_url %}
            <img src="{{ t.title.cover_url }}" alt="cover" class="item__cover">
            {% else %}
            <img src="https://mobius-lubes.com/wp-content/uploads/2025/09/empty-img.webp" alt=""
            class="item__empty-cover">
            {% endif %}
            <span class="item__name">{{ t.title.name|truncatechars:20 }}</span>
        </a>
        </li>
    {% empty %}
        <p class="catalog__empty">Ничего не найдено...</p>
    {% endfor %}
    </ul>
{% endif %}
</div>
{% endblock %}